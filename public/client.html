<!--
 * @Author: liuchenxi
 * @Date: 2021-09-27 13:46:33
 * @LastEditTime: 2021-09-28 09:47:22
 * @LastEditors: Please set LastEditors
 * @Description: Client
 * @FilePath: \webrtc-demo\public\answer.html
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="./static/css/index.css">
  <title></title>
</head>

<body>
  <div class="container">
    <div id="video-box">
      <button class="start-button" onclick="handleCall()">呼叫</button>
      <button class="accept-button" onclick="acceptCall()">接听</button>
      <button class="refuse-button" onclick="refuseCall()">拒绝</button>
    </div>
    日志：
    <div class="logger"></div>
  </div>

  <script src="./static/js/index.js"></script>

  <script>
    /** ******* 处理通话的相关逻辑 **********/
    // 处理Caller的呼叫请求
    function handleCall() {
      signalingChannel.send(JSON.stringify({ type: 'call' }))
      button.innerHTML = '呼叫中'
      getUserMedia()
    }

    // 接受通话邀请
    function acceptCall() {
      message.log('接受通话邀请')
      signalingChannel.send(JSON.stringify({ type: 'accept' }))
      acceptButton.style.display = 'none'
      refuseButton.style.display = 'none'
    }

    // 拒绝通话邀请
    function refuseCall() {
      message.log('拒绝通话邀请')
      signalingChannel.send(JSON.stringify({ type: 'refuse' }))
      acceptButton.style.display = 'none'
      refuseButton.style.display = 'none'
    }
  </script>

</body>

</html>